# 图论项目：最小生成树可视化 - Kruskal算法

## 项目简介

本项目实现了一个基于Kruskal算法的最小生成树可视化系统，用于分析网络中的最小连接代价。该系统不仅实现了算法的核心逻辑，还提供了直观的可视化界面，帮助用户理解算法的执行过程。

## 项目特点

- **算法实现**：完整实现了Kruskal算法，用于寻找图中的最小生成树
- **可视化界面**：提供交互式的可视化界面，直观展示算法执行过程
- **详细过程记录**：记录算法执行过程中的每一步，包括考虑但未选择的边
- **交互控制**：支持暂停、开始、重置、单步执行等控制功能
- **现代化UI**：使用Bootstrap和D3.js构建美观的界面

## 项目结构

```
Graph Theory/
├── CMakeLists.txt          # CMake构建配置
├── README.md               # 项目说明文档
├── build.sh                # 构建脚本
├── data/
│   └── network.txt         # 网络数据文件
├── include/                # 头文件目录
│   ├── Edge.h              # 边的定义
│   ├── Exporter.h          # 数据导出类
│   ├── Graph.h             # 图的定义
│   ├── Kruskal.h           # Kruskal算法实现
│   ├── Logger.h            # 日志记录
│   └── UnionFind.h         # 并查集实现
├── src/                    # 源代码目录
│   ├── Exporter.cpp        # 数据导出实现
│   ├── Graph.cpp           # 图的实现
│   ├── Kruskal.cpp         # Kruskal算法实现
│   ├── Logger.cpp          # 日志实现
│   ├── UnionFind.cpp       # 并查集实现
│   ├── main.cpp            # 主程序
│   └── main_new.cpp        # 新版主程序
└── web/                    # 可视化相关文件
    ├── visualize.html      # 可视化界面
    ├── graph.json          # 图数据
    └── process.json        # 算法过程数据
```

## 技术栈

- **后端**：C++实现Kruskal算法，导出JSON数据
- **前端**：HTML5 + CSS3 + JavaScript + D3.js
- **UI框架**：Bootstrap 5
- **可视化**：D3.js力导向图
- **构建系统**：CMake

## 核心算法

### Kruskal算法

Kruskal算法是一种用于寻找加权无向图中最小生成树的贪心算法。算法步骤如下：

1. 将所有边按照权重从小到大排序
2. 初始化一个空的森林，每个顶点都是一棵独立的树
3. 按顺序考虑每条边：
   - 如果这条边连接的两棵树在不同的集合中，则将这条边加入最小生成树，并合并这两棵树
   - 如果这条边连接的两棵树已经在同一集合中，则跳过这条边（会形成环）
4. 重复步骤3，直到最小生成树中有n-1条边（n为顶点数）

### 并查集

并查集（Union-Find）数据结构用于高效地维护元素的集合划分，支持两种操作：

- `find(x)`：查找元素x所属集合的代表元素
- `union(x, y)`：合并元素x和元素y所在的集合

## 可视化功能

可视化界面提供了以下功能：

1. **图形展示**：
   - 使用力导向图布局展示网络结构
   - 节点表示网络中的点
   - 边表示连接，权值显示在边上

2. **动画控制**：
   - 开始：启动算法动画演示
   - 暂停：暂停当前动画
   - 重置：重置动画到初始状态
   - 单步：逐步执行算法

3. **交互功能**：
   - 拖拽节点调整位置
   - 显示/隐藏边权值
   - 调整动画速度
   - 鼠标悬停显示节点信息

4. **算法过程展示**：
   - 高亮当前考虑的边
   - 标记已选择的边
   - 显示当前步骤和总进度
   - 实时更新统计信息

## 使用方法

### 1. 编译项目

```bash
cd /home/ubuntu/vs_workspace/Graph\ Theory
chmod +x build.sh
./build.sh
```

### 2. 运行程序生成数据

```bash
cd build
./GraphTheory
```

程序会读取`data/network.txt`文件中的网络数据，计算最小生成树，并将结果导出到`web/`目录下的JSON文件中。

### 3. 打开可视化界面

在浏览器中打开`web/visualize.html`文件：

```bash
# 使用默认浏览器打开
open web/visualize.html

# 或者使用文件路径直接访问
file:///home/ubuntu/vs_workspace/Graph%20Theory/web/visualize.html
```

### 4. 使用控制按钮

- 点击"开始"按钮启动算法动画
- 使用"暂停"按钮暂停动画
- 使用"重置"按钮重置到初始状态
- 使用"单步"按钮逐步执行算法
- 调整速度滑块改变动画速度

## 数据格式

### 图数据格式 (graph.json)

```json
{
  "nodes": [0, 1, 2, 3, 4],
  "edges": [
    {"from": 0, "to": 1, "cost": 2},
    {"from": 1, "to": 2, "cost": 3},
    {"from": 2, "to": 3, "cost": 1},
    {"from": 2, "to": 4, "cost": 4},
    {"from": 1, "to": 3, "cost": 6}
  ]
}
```

### 算法过程数据格式 (process.json)

```json
{
  "nodes": [0, 1, 2, 3, 4],
  "steps": [
    {"from": 2, "to": 3, "cost": 1, "selected": true, "reason": "顶点不在同一集合中，不会形成环"},
    {"from": 0, "to": 1, "cost": 2, "selected": true, "reason": "顶点不在同一集合中，不会形成环"},
    {"from": 1, "to": 2, "cost": 3, "selected": true, "reason": "顶点不在同一集合中，不会形成环"},
    {"from": 2, "to": 4, "cost": 4, "selected": true, "reason": "顶点不在同一集合中，不会形成环"},
    {"from": 1, "to": 3, "cost": 6, "selected": false, "reason": "顶点已在同一集合中，会形成环"}
  ]
}
```

## 扩展功能

项目支持以下扩展：

1. **自定义网络数据**：修改`data/network.txt`文件，使用自定义的网络数据
2. **算法比较**：可以添加其他最小生成树算法（如Prim算法）进行比较
3. **性能分析**：记录算法运行时间，分析不同规模网络的性能
4. **防御分析**：模拟网络防御对最小攻击路径的影响

## 注意事项

- 如果数据文件不存在，程序将使用默认数据
- 可视化页面会自动加载数据文件，如果加载失败将使用模拟数据
- 节点可以通过拖拽调整位置，以便更好地观察网络结构
- 可视化界面已针对节点密集情况进行了优化，增加了节点之间的距离

## 贡献指南

欢迎提交问题报告和功能请求。如果您想贡献代码，请遵循以下步骤：

1. Fork项目
2. 创建功能分支
3. 提交更改
4. 推送到分支
5. 创建Pull Request

## 许可证

本项目采用MIT许可证。详情请参阅LICENSE文件。
